(function(a){'use strict';function b(a,b){this.recalc_needed=!0,this.variation_attributes=a,this.variations_available=b,this.variations_current={},this.variations_selected={},this.reset_current=function(){var a,b;for(a in this.variation_attributes){this.variations_current[a]={};for(b=0;b<this.variation_attributes[a].length;b++)this.variations_current[a.toString()][this.variation_attributes[a][b].toString()]=0}},this.update_current=function(){var b,d,a,c,f,g,e,h,i,j;this.reset_current();for(b=0;b<this.variations_available.length;b++){if(!this.variations_available[b].variation_is_active)continue;d=this.variations_available[b].attributes;for(a in d)if(c=d[a],f=this.variations_selected[a],f&&f==c)this.variations_current[a][c]=1;else{g=!0;for(e in this.variations_selected){if(e==a)continue;h=this.variations_selected[e],i=d[e],h&&i&&h!=i&&(g=!1)}if(g)if(c==="")for(j in this.variations_current[a])this.variations_current[a][j]=1;else this.variations_current[a][c]=1}}this.recalc_needed=!1},this.get_current=function(){return this.recalc_needed&&this.update_current(),this.variations_current},this.reset_selected=function(){this.recalc_needed=!0,this.variations_selected={}},this.set_selected=function(a,b){this.recalc_needed=!0,this.variations_selected[a]=b},this.get_selected=function(){return this.variations_selected}}function d(c){var b='';return typeof c!="undefined"&&a.isArray(c.la_additional_images)&&a.each(c.la_additional_images,function(c,a){b+='<div data-thumb="'+a.thumb[0]+'" class="woocommerce-product-gallery__image">',b+='<a href="'+a.large[0]+'" data-videolink="'+a.videolink+'">',b+='<span class="g-overlay" style="background-image: url('+a.large[0]+')"></span>',b+='<img ',b+='width="'+a.single[1]+'" ',b+='height="'+a.single[2]+'" ',b+='src="'+a.single[0]+'" ',b+='class="attachment-shop_single size-shop_single" ',b+='alt="'+a.alt+'" ',b+='title="'+a.title+'" ',b+='data-caption="'+a.caption+'" ',b+='data-src="'+a.large[0]+'" ',b+='data-large_image="'+a.large[0]+'" ',b+='data-large_image_width="'+a.large[1]+'" ',b+='data-large_image_height="'+a.large[2]+'" ',b+='srcset="'+a.srcset+'" ',b+='sizes="'+a.sizes+'" ',b+='</a>',b+='</div>'}),b}function c(m,h){var n=m.closest('.la-p-single-wrap'),b=n.find('.product--large-image'),c='',j,g,k,i,e,f,l;if(h!==null?c=d(h):(j=b.data('old_gallery')||!1,j&&(c=j)),c!=''){if(!!b.data('prev_gallery')){if(g=a(b.data('prev_gallery')),k=a(c),i=!0,g.length==k.length){for(e=0;e<g.length;e++)a(g[e]).attr('data-thumb')!=a(k[e]).attr('data-thumb')&&(i=!1)}else i=!1;if(i)return}b.data('prev_gallery',c),f='<div class="woocommerce-product-gallery--with-images la-woo-product-gallery'+(b.hasClass('force-disable-slider-script')?' force-disable-slider-script':'')+'">',!b.data('gallery_action')||(f+=b.data('gallery_action')),f+='<figure class="woocommerce-product-gallery__wrapper">'+c+'</figure><div class="la_woo_loading"><div class="la-loader spinner3"><div class="dot1"></div><div class="dot2"></div><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div></div>',f+='<div id="la_woo_thumbs" class="la-woo-thumbs"><div class="la-thumb-inner"></div></div>',b.removeAttr('data-element-loaded').css({'max-height':b.height(),'min-height':b.height()}).addClass('swatch-loading'),b.html(f),l=b.find('.la-woo-product-gallery'),h!==null&&l.addClass('la-rebuild-product-gallery'),l.lastudio_product_gallery().addClass('swatch-loaded'),b.css({'max-height':'none','min-height':'200px'})}}a.fn.lastudio_variation_form=function(){var d=this,h=parseInt(d.data('product_id'),10),e=null,f=!1,g=null;d.addClass('la-init-swatches'),d.find('td.label').each(function(){var b=a(this).find('label');b.append('<span class="swatch-label"></span>')}),d.on('bind_calculator',function(){var i=d.data('product_variations'),c,j;f=i===!1,f&&d.block({message:null,overlayCSS:{background:'#fff',opacity:.6}}),c={},d.find('.select-option.selected').each(function(h,g){var c=a(this),d=c.closest('div.select').eq(0),e=d.closest('tr').find('.swatch-label').eq(0),f=d.find('select').first(),b=a('<div/>').html(c.data('value')).text();b=b.replace(/'/g,"\\'"),b=b.replace(/"/g,'\\"'),e&&e.html(f.children("[value='"+b+"']").eq(0).text()),f.trigger('change')}),d.find('.variations select').each(function(i,h){var d=a(h),f=d.data('attribute_name')||d.attr('name'),b,e,g;if(c[f]=[],b='',b=d.find('option:gt(0)').get(),b.length)for(e=0;e<b.length;e++)g=b[e],c[f].push(a(g).val())}),f?(g&&g.abort(),j={product_id:h,action:'la_swatch_get_product_variations'},g=a.ajax({url:la_theme_config.ajax_url,type:'POST',data:j,success:function(a){e=new b(c,a.data,null,null),d.unblock()}})):e=new b(c,i,null,null),d.trigger('woocommerce_variation_has_changed')}),d.on('change','.wc-default-select',function(d){var b=a(this),c=b.closest('tr').find('.swatch-label').eq(0);b.val()!=''?c.html(b.find('option:selected').html()):c.html('')}),d.find('.wc-default-select').trigger('change'),d.on('click','.reset_variations',function(){return d.find('.swatch-label').html(''),d.find('.select-option').removeClass('selected'),d.find('.radio-option').prop('checked',!1),a('span.price',d.siblings('.single-price-wrapper')).remove(),!1}).on('click','.select-option',function(g){var b,e,d,f,c;if(g.preventDefault(),b=a(this),e=b.closest('div.select').eq(0),d=e.closest('tr').find('.swatch-label').eq(0),f=e.find('select').first(),b.hasClass('disabled'))return!1;b.hasClass('selected')?(b.removeClass('selected'),f.children('option:eq(0)').prop("selected","selected").change(),d&&d.html('')):(e.find('.select-option').removeClass('selected'),b.addClass('selected'),c=a('<div/>').html(b.data('value')).text(),c=c.replace(/'/g,"\\'"),c=c.replace(/"/g,'\\"'),f.trigger('focusin').children("[value='"+c+"']").prop("selected","selected").change(),d&&d.html(f.children("[value='"+c+"']").eq(0).text()))}).on('change','.radio-option',function(f){var c=a(this),d=c.closest('div.select').eq(0),e=d.find('select').first(),b=a('<div/>').html(c.val()).text();b=b.replace(/'/g,"\\'"),b=b.replace(/"/g,'\\"'),e.trigger('focusin').children("[value='"+b+"']").prop("selected","selected").change()}).on('woocommerce_variation_has_changed',function(){if(e===null)return;d.find('.variations select').each(function(){var b=a(this).data('attribute_name')||a(this).attr('name');e.set_selected(b,a(this).val())});var b=e.get_current();d.find('div.select').each(function(g,c){var d=a(c).find('select').first(),f=d.data('attribute_name')||d.attr('name'),e=b[f];a(c).find('div.select-option').each(function(c,b){e[a(b).data('value')]?a(b).removeClass('disabled'):a(b).addClass('disabled','disabled')}),a(c).find('input.radio-option').each(function(c,b){e[a(b).val()]?(a(b).removeAttr('disabled'),a(b).parent().removeClass('disabled')):(a(b).attr('disabled','disabled'),a(b).parent().addClass('disabled','disabled'))})}),f&&d.find('.wc-default-select').each(function(g,d){var c=a(d),e=c.data('attribute_name')||c.attr('name'),f=b[e];c.find('option:gt(0)').removeClass('attached'),c.find('option:gt(0)').removeClass('enabled'),c.find('option:gt(0)').removeAttr('disabled'),c.find('option:gt(0)').each(function(c,b){f[a(b).val()]?(a(b).addClass('attached'),a(b).addClass('enabled')):a(b).addClass('disabled','disabled')}),c.find('option:gt(0):not(.enabled)').attr('disabled','disabled')})}).on('found_variation',function(b,a){c(d,a)}).on('reset_image',function(a){c(d,null)}),d.find('.single_variation').on('show_variation',function(e,c,f){var b=d.siblings('.single-price-wrapper');a('span.price',b).remove(),b.append(c.price_html)})},a(function(){var b=[];la_theme_config.la_extension_available.swatches?a(document).on('wc_variation_form','form.variations_form',function(d){var c=a(d.target);b.push(c),c.data('has_swatches_form')||(!0||c.find('.swatch-control').length)&&(c.data('has_swatches_form',!0),c.lastudio_variation_form(),c.trigger('bind_calculator'),c.on('reload_product_variations',function(){for(var a=0;a<b.length;a++)b[a].trigger('woocommerce_variation_has_changed'),b[a].trigger('bind_calculator'),b[a].trigger('woocommerce_variation_has_changed')}))}):console.log('la_theme_config.la_extension_available.swatches is not activate')})})(jQuery)